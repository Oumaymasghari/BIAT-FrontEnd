{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { HttpClient } from '@angular/common/http';\nimport { Component, Input } from '@angular/core';\nimport { CovoiturageModule } from 'src/app/shared/Module/covoiturage/covoiturage.module';\nimport { PostCommentModule } from 'src/app/shared/Module/post-comment/post-comment.module';\nimport { CovoiturageService } from 'src/app/shared/Services/covoiturage/covoiturage.service';\nimport { PostCommentService } from 'src/app/shared/Services/postComment/post-comment.service';\nimport { StorageService } from 'src/app/shared/Services/storage/storage.service';\nimport { UserService } from 'src/app/shared/Services/user/user.service';\nvar PostsComponent = /** @class */function () {\n  function PostsComponent(covoiturageService, storageService, userservice, http, postCommentService, route) {\n    this.covoiturageService = covoiturageService;\n    this.storageService = storageService;\n    this.userservice = userservice;\n    this.http = http;\n    this.postCommentService = postCommentService;\n    this.route = route;\n    this.newComment = new PostCommentModule();\n    // REACTION \n    this.emojiList = ['üòÄ', 'üòç', 'üëç', 'üëé', 'üéâ'];\n    this.reactions = ['üòÄ', 'üòç', 'üëç', 'üëé', 'üéâ'];\n    this.showReactions = false;\n  }\n  PostsComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.currentUser = this.storageService.getUser();\n    this.getAllcov();\n    this.comment = {\n      id: null,\n      comment_text: null,\n      comment_author: null,\n      comment_date: null,\n      covoiturageId: null\n    }, this.covoiturage = {\n      id: null,\n      user: {\n        username: null\n      },\n      heureDepart: null,\n      depart: null,\n      arrivee: null,\n      datedepart: null,\n      nbPersonne: null,\n      prix: null,\n      contactNumber: null,\n      // Reaction properties\n      likeCount: 0,\n      loveCount: null,\n      thumbsUpCount: null,\n      thumbsDownCount: null,\n      celebrationCount: null,\n      datePost: new Date()\n    };\n    /////comment\n    this.route.paramMap.subscribe(function (params) {\n      var postId = params.get(\"id\");\n      _this.covoiturageService.retrievecovbyid(postId).subscribe(function (post) {\n        _this.covoiturage = post;\n        _this.getComments(postId);\n      });\n    });\n    this.comment.comment_author = this.authService.getCurrentUser().username;\n  };\n  PostsComponent.prototype.onReactionClick = function (reaction) {\n    this.currentEmoji = reaction;\n    this.showReactions = false;\n  };\n  PostsComponent.prototype.toggleReactions = function () {\n    this.showReactions = !this.showReactions;\n  };\n  ///second attemt mtaa reaction \n  PostsComponent.prototype.addReaction = function (id, reaction) {\n    var _this = this;\n    // console.log(JSON.stringify(this.covoiturage.id));\n    this.covoiturageService.addReaction(id, reaction).subscribe(function (response) {\n      // Update the post with the new reaction count\n      _this.covoiturage = response;\n    }, function (error) {\n      return console.error(error);\n    });\n    var currentUser = this.userservice.getCurrentUser();\n    this.covoiturageForm.value.user = currentUser.id;\n  };\n  ///////////////covoiturage \n  PostsComponent.prototype.isAuthenticated = function () {\n    return this.userservice.isAuthenticated();\n  };\n  PostsComponent.prototype.addcov = function (covoiturage) {\n    var _this = this;\n    console.log(JSON.stringify(this.covoiturage.id));\n    console.log(\"user \" + JSON.stringify(this.storageService.getUser()));\n    this.covoiturageService.addCovoiturage(covoiturage).subscribe(function () {\n      _this.listPostsCov.unshift(covoiturage);\n      //this.getAllcov();\n    });\n\n    var currentUser = this.userservice.getCurrentUser();\n    this.covoiturageForm.value.user = currentUser.id;\n  };\n  PostsComponent.prototype.getAllcov = function () {\n    var _this = this;\n    this.covoiturageService.retrieveallCov().subscribe(function (res) {\n      _this.listPostsCov = res;\n    });\n  };\n  /////////COMMENT \n  PostsComponent.prototype.getComments = function (postId) {\n    var _this = this;\n    this.covoiturageService.getCommentsByPostId(postId).subscribe(function (comments) {\n      return _this.listComments = comments;\n    });\n  };\n  PostsComponent.prototype.addComment = function (postId, comment) {\n    var _this = this;\n    console.log(JSON.stringify(this.comment.covoiturageId));\n    this.covoiturageService.addComment(postId, comment).subscribe(function (comment) {\n      _this.listPostsCov.unshift(comment);\n    });\n  };\n  var _a;\n  __decorate([Input(), __metadata(\"design:type\", CovoiturageModule)], PostsComponent.prototype, \"covoiturage\", void 0);\n  PostsComponent = __decorate([Component({\n    selector: 'app-posts',\n    templateUrl: './posts.component.html',\n    styleUrls: ['./posts.component.scss']\n  }), __metadata(\"design:paramtypes\", [CovoiturageService, StorageService, UserService, HttpClient, PostCommentService, typeof (_a = typeof ActivatedRoute !== \"undefined\" && ActivatedRoute) === \"function\" ? _a : Object])], PostsComponent);\n  return PostsComponent;\n}();\nexport { PostsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}