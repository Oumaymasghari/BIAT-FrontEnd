{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { catchError, tap, throwError } from 'rxjs';\nimport { StorageService } from 'src/app/shared/Services/storage/storage.service';\nimport { UserService } from 'src/app/shared/Services/user/user.service';\nimport { VenteachatService } from 'src/app/shared/Services/venteachat/venteachat.service';\nvar VenteComponent = /** @class */function () {\n  function VenteComponent(venteachatService, userservice, storageService, formBuilder) {\n    this.venteachatService = venteachatService;\n    this.userservice = userservice;\n    this.storageService = storageService;\n    this.formBuilder = formBuilder;\n    this.showModal = \"none\";\n    this.result = null;\n  }\n  VenteComponent.prototype.ngOnInit = function () {\n    this.resultatC = '';\n    this.currentUser = this.storageService.getUser();\n    this.getvente();\n    this.creditRequest = {\n      salaireMensuel: null,\n      mensualitesCredit: null\n    };\n    this.vente = {\n      id: null,\n      user: {\n        username: null\n      },\n      article: null,\n      place: null,\n      contactNumber: null,\n      typeVente: null,\n      pictures: null,\n      prix: null\n    };\n    this.creditForm = this.formBuilder.group({\n      salaireMensuel: ['', Validators.required],\n      mensualitesCredit: [''],\n      prixVente: ['', Validators.required]\n    });\n  };\n  VenteComponent.prototype.selectFile = function (event) {\n    this.selectedFiles = event.target.files;\n  };\n  VenteComponent.prototype.upload = function (vente) {\n    var _this = this;\n    this.currentFileUpload = this.selectedFiles.item(0);\n    vente.personne3 = this.storageService.getUser().id;\n    console.log(\"this.storageService.getUser().id \" + this.storageService.getUser().id);\n    this.venteachatService.addVente(this.currentFileUpload, vente).pipe(tap(function (response) {\n      vente.user = _this.storageService.getUser();\n      console.log('Response:', response);\n    }), catchError(function (error) {\n      console.log('Error:', error);\n      return throwError(error);\n    })).subscribe();\n  };\n  VenteComponent.prototype.getvente = function () {\n    var _this = this;\n    this.venteachatService.getAcceptedVentes().subscribe(function (ventes) {\n      _this.acceptedVentes = ventes;\n    });\n    // this.vente.user.username=this.storageService.getUser().username;\n  };\n\n  VenteComponent.prototype.openModal = function () {\n    this.showModal = \"block\";\n  };\n  VenteComponent.prototype.closeModal = function () {\n    this.showModal = \"none\";\n  };\n  VenteComponent.prototype.calculate = function (idvente) {\n    var _this = this;\n    var creditRequest = this.creditRequest;\n    this.venteachatService.calculerCapaciteCredit(creditRequest, idvente).subscribe(function (resp) {\n      console.log(\"respp \");\n      console.log(resp);\n      _this.resultatC = JSON.stringify(resp);\n    },\n    //  resultat => this.resultatCalcul = resultat,\n    console.log(\"resultatCalcul  \" + JSON.stringify(this.resultatC)));\n  };\n  VenteComponent = __decorate([Component({\n    selector: 'app-vente',\n    templateUrl: './vente.component.html',\n    styleUrls: ['./vente.component.scss']\n  }), __metadata(\"design:paramtypes\", [VenteachatService, UserService, StorageService, FormBuilder])], VenteComponent);\n  return VenteComponent;\n}();\nexport { VenteComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}