{"ast":null,"code":"import { switchMap } from \"rxjs\";\nimport { PersonneServiceService } from \"src/app/shared/Services/PersonneService/personne-service.service\";\nimport { StorageService } from \"src/app/shared/Services/storage/storage.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/Services/PersonneService/personne-service.service\";\nimport * as i2 from \"src/app/shared/Services/storage/storage.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UserComponent_ng_container_75_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"img\", 42);\n    i0.ɵɵlistener(\"click\", function UserComponent_ng_container_75_Template_img_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      i0.ɵɵnextContext();\n      var _r2 = i0.ɵɵreference(78);\n      return i0.ɵɵresetView(_r2.click());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction UserComponent_ng_container_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 43);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r1.personne.profilePicUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nvar UserComponent = /** @class */function () {\n  function UserComponent(personneServiceService, storageService) {\n    this.personneServiceService = personneServiceService;\n    this.storageService = storageService;\n  }\n  UserComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.currentUser = this.storageService.getUser();\n    this.personne = {\n      id: null,\n      nom: null,\n      prenom: null,\n      profilePic: null,\n      age: null,\n      cin: null,\n      email: this.storageService.getUser().email,\n      dateNaissance: null,\n      sexe: null,\n      telPersonnel: null,\n      telPoste: null,\n      agence: null,\n      profilePicUrl: null,\n      userid: this.storageService.getUser().id\n    };\n    this.personneServiceService.getProfilePicUrl(personne.id).subscribe(function (data) {\n      _this.personne.profilePicUrl = data;\n    }, function (error) {\n      console.log(error);\n    });\n  };\n  UserComponent.prototype.onFileSelected = function (event) {\n    this.selectedFile = event.target.files[0];\n  };\n  // uploadProfilePic(personneid:any): void {\n  //   console.log(\"test\");\n  //   if (this.selectedFile) {\n  //     this.personneServiceService.uploadProfilePic(this.selectedFile,personneid).subscribe((data) => {\n  //       console.log(data);\n  //       this.personne.profilePic = data.fileDownloadUri;\n  //     });\n  //   }\n  // }\n  UserComponent.prototype.onSubmit = function () {\n    var _this = this;\n    if (!this.selectedFile) {\n      console.log(\"No file selected.\");\n      return;\n    }\n    var formData = new FormData();\n    formData.append(\"file\", this.selectedFile);\n    this.personneServiceService.getPersonneByUserId(this.storageService.getUser().id).pipe(switchMap(function (per) {\n      return _this.personneServiceService.uploadProfilePic(formData, per);\n    })).subscribe(function (data) {\n      console.log(data);\n      // Read the uploaded file as a data URL\n      var reader = new FileReader();\n      reader.readAsDataURL(_this.selectedFile);\n      reader.onload = function () {\n        // Update the personne object with the new profile picture data URL\n        _this.personne.profilePicUrl = reader.result;\n      };\n      _this.personne.profilePicUrl = data.profilePicUrl;\n      // Update the personne object with the new profile picture URL\n      // this.personne.profilePic = data.fileDownloadUri;\n    }, function (error) {\n      console.log(error);\n    });\n  };\n  UserComponent.prototype.addPersonne = function (per) {\n    this.personneServiceService.addPersonne(per, this.storageService.getUser().id).subscribe();\n  };\n  UserComponent.prototype.getAllcov = function () {\n    var _this = this;\n    this.personneServiceService.retrieveallPersonne().subscribe(function (res) {\n      _this.listPersonne = res;\n    });\n  };\n  UserComponent.ɵfac = function UserComponent_Factory(t) {\n    return new (t || UserComponent)(i0.ɵɵdirectiveInject(i1.PersonneServiceService), i0.ɵɵdirectiveInject(i2.StorageService));\n  };\n  UserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserComponent,\n    selectors: [[\"app-user\"]],\n    decls: 84,\n    vars: 11,\n    consts: [[1, \"content\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-header\"], [1, \"title\"], [1, \"card-body\"], [1, \"col-md-3\", \"px-md-1\"], [1, \"form-group\"], [\"placeholder\", \"nom\", \"type\", \"text\", \"name\", \"nom\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"prenom\", \"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-4\", \"pl-md-1\"], [\"placeholder\", \"votre age\", \"type\", \"number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-4\", \"pl-md-1\", 2, \"width\", \"10px\"], [\"placeholder\", \"votre cin\", \"type\", \"number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"date de naissance\", \"type\", \"date\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-6\", \"pr-md-1\"], [\"placeholder\", \"Telephone personnel\", \"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-6\", \"pl-md-1\"], [\"placeholder\", \"Telephone Poste\", \"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-4\", \"pr-md-1\"], [\"placeholder\", \"Votre Agence\", \"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-4\", \"pr-md-1\", 2, \"width\", \"150px\", \"padding-left\", \"10px\", \"padding-right\", \"30px\"], [\"name\", \"dropdownOption\", \"id\", \"dropdownOption\", \"required\", \"\", \"name\", \"Sexe\", 1, \"form-control\", \"dropdown-danger\", \"dropdown-menu-right\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"homme\", 1, \"dropdown-item\"], [\"value\", \"femme\", 1, \"dropdown-item\"], [1, \"card-footer\"], [\"type\", \"submit\", 1, \"btn\", \"btn-fill\", \"btn-danger\", 2, \"background\", \"linear-gradient(rgb(250, 107, 25), rgb(233, 98, 30))\", 3, \"click\"], [1, \"col-md-4\"], [1, \"card\", \"card-user\"], [1, \"card-text\"], [1, \"author\"], [1, \"block\", \"block-one\"], [1, \"block\", \"block-two\"], [1, \"block\", \"block-three\"], [1, \"block\", \"block-four\"], [\"href\", \"javascript:void(0)\"], [4, \"ngIf\"], [\"type\", \"file\", 2, \"display\", \"none\", 3, \"click\", \"change\"], [\"fileInput\", \"\"], [1, \"description\"], [1, \"card-description\"], [\"alt\", \"Default Profile Picture\", \"src\", \"assets/img/profile.png\", 1, \"avatar\", 3, \"click\"], [1, \"avatar\", 3, \"src\"]],\n    template: function UserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n        i0.ɵɵtext(6, \"Edit Profile\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"form\")(9, \"div\", 1)(10, \"div\", 7)(11, \"div\", 8)(12, \"label\");\n        i0.ɵɵtext(13, \" nom \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.personne.nom = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 7)(16, \"div\", 8)(17, \"label\");\n        i0.ɵɵtext(18, \" prenom \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_19_listener($event) {\n          return ctx.personne.prenom = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"div\", 11)(21, \"div\", 8)(22, \"label\");\n        i0.ɵɵtext(23, \" age \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_24_listener($event) {\n          return ctx.personne.age = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"div\", 13)(26, \"div\", 8)(27, \"label\");\n        i0.ɵɵtext(28, \" cin \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_29_listener($event) {\n          return ctx.personne.cin = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(30, \"div\", 13)(31, \"div\", 8)(32, \"label\");\n        i0.ɵɵtext(33, \" date de naissance \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"input\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_34_listener($event) {\n          return ctx.personne.dateNaissance = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(35, \"div\", 1)(36, \"div\", 16)(37, \"div\", 8)(38, \"label\");\n        i0.ɵɵtext(39, \" Telephone personnel \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"input\", 17);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_40_listener($event) {\n          return ctx.personne.telPersonnel = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(41, \"div\", 18)(42, \"div\", 8)(43, \"label\");\n        i0.ɵɵtext(44, \" Telephone Poste \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"input\", 19);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_45_listener($event) {\n          return ctx.personne.telPoste = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(46, \"div\", 1)(47, \"div\", 20)(48, \"div\", 8)(49, \"label\");\n        i0.ɵɵtext(50, \" Agence \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"input\", 21);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_51_listener($event) {\n          return ctx.personne.agence = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(52, \"div\", 1)(53, \"div\", 22)(54, \"label\");\n        i0.ɵɵtext(55, \" Sexe \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"select\", 23);\n        i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_select_ngModelChange_56_listener($event) {\n          return ctx.personne.sexe = $event;\n        });\n        i0.ɵɵelementStart(57, \"option\", 24);\n        i0.ɵɵtext(58, \"homme\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(59, \"option\", 25);\n        i0.ɵɵtext(60, \"femme\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(61, \"div\", 26)(62, \"button\", 27);\n        i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_62_listener() {\n          return ctx.addPersonne(ctx.personne);\n        });\n        i0.ɵɵtext(63, \"Save\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(64, \"div\", 28)(65, \"div\", 29)(66, \"div\", 6);\n        i0.ɵɵelement(67, \"p\", 30);\n        i0.ɵɵelementStart(68, \"div\", 31);\n        i0.ɵɵelement(69, \"div\", 32)(70, \"div\", 33)(71, \"div\", 34)(72, \"div\", 35);\n        i0.ɵɵelementStart(73, \"a\", 36)(74, \"div\");\n        i0.ɵɵtemplate(75, UserComponent_ng_container_75_Template, 2, 0, \"ng-container\", 37);\n        i0.ɵɵtemplate(76, UserComponent_ng_container_76_Template, 2, 1, \"ng-container\", 37);\n        i0.ɵɵelementStart(77, \"input\", 38, 39);\n        i0.ɵɵlistener(\"click\", function UserComponent_Template_input_click_77_listener() {\n          return ctx.onSubmit();\n        })(\"change\", function UserComponent_Template_input_change_77_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(79, \"h5\", 5);\n        i0.ɵɵtext(80, \"Oumayma sghari\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(81, \"p\", 40);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(82, \"div\", 41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(83, \"div\", 26);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.nom);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.prenom);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.age);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.cin);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.dateNaissance);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.telPersonnel);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.telPoste);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.agence);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.personne.sexe);\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"ngIf\", !ctx.personne.profilePicUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.personne.profilePicUrl);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n    styles: [\".form-control[_ngcontent-%COMP%]:focus {\\n  border-color: #db5a1f;\\n}\"]\n  });\n  return UserComponent;\n}();\nexport { UserComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}